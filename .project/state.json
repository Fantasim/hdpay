{
  "project_name": "HDPay",
  "description": "A self-hosted cryptocurrency payment tool that derives HD wallet addresses (BTC, BSC, SOL), scans balances via free-tier APIs, tracks transactions locally, and enables batch fund consolidation — all via a localhost Svelte dashboard.",
  "project_type": "webapp",
  "created_at": "2026-02-18T06:55:00Z",
  "current_version": 2,
  "version_history": [
    {
      "version": 1,
      "started_at": "2026-02-18T06:55:00Z",
      "completed_at": "2026-02-18T23:59:00Z",
      "output_dir": "",
      "phases_snapshot": {
        "brainstorm": { "status": "skipped", "file": "00-brainstorm.md", "started_at": null, "completed_at": null },
        "market": { "status": "skipped", "file": "01-market-analysis.md", "started_at": null, "completed_at": null },
        "plan": { "status": "completed", "file": "02-plan.md", "started_at": "2026-02-18T06:58:00Z", "completed_at": "2026-02-18T07:05:00Z" },
        "mockup": { "status": "completed", "file": "03-mockups/", "started_at": "2026-02-18T07:10:00Z", "completed_at": "2026-02-18T07:35:00Z" },
        "build_plan": { "status": "completed", "file": "04-build-plan/", "started_at": "2026-02-18T08:00:00Z", "completed_at": "2026-02-18T08:30:00Z" },
        "setup": { "status": "skipped", "file": null, "started_at": null, "completed_at": null }
      },
      "build_snapshot": {
        "total_phases": 11,
        "phases": [
          "Project Foundation",
          "HD Wallet & Address Generation",
          "Address Explorer",
          "Scanner Engine (Backend)",
          "Scan UI + SSE",
          "Dashboard & Price Service",
          "BTC Transaction Engine",
          "BSC Transaction Engine + Gas Pre-Seed",
          "SOL Transaction Engine",
          "Send Interface",
          "History, Settings & Deployment"
        ]
      },
      "summary": "V1 complete: 11 phases, 22MB single binary, full scan→send pipeline for BTC/BSC/SOL with USDC/USDT token support, dashboard with portfolio charts, transaction history, settings, embedded SPA."
    }
  ],
  "integration_mode": false,
  "existing_project": {
    "maturity": null,
    "goal": null,
    "preserve": [],
    "known_issues": [],
    "discovery_file": null
  },
  "current_phase": "building",
  "current_build_phase": null,
  "phases": {
    "brainstorm": { "status": "skipped", "file": "v2/00-brainstorm.md", "started_at": null, "completed_at": null },
    "market": { "status": "skipped", "file": "v2/01-market-analysis.md", "started_at": null, "completed_at": null },
    "plan": { "status": "completed", "file": "v2/02-plan.md", "started_at": "2026-02-18T16:00:00Z", "completed_at": "2026-02-18T16:30:00Z" },
    "mockup": { "status": "skipped", "file": "v2/03-mockups/", "started_at": null, "completed_at": null },
    "build_plan": { "status": "completed", "file": "v2/04-build-plan/", "started_at": "2026-02-18T16:30:00Z", "completed_at": "2026-02-18T17:00:00Z" },
    "setup": { "status": "skipped", "file": null, "started_at": null, "completed_at": null }
  },
  "build": {
    "total_phases": 6,
    "current_phase_index": 1,
    "phases": [
      { "name": "Foundation: Schema, Error Types & Circuit Breaker", "status": "completed", "plan_file": "v2/04-build-plan/phases/phase-01/PLAN.md", "summary_file": "v2/04-build-plan/phases/phase-01/SUMMARY.md" },
      { "name": "Scanner Resilience", "status": "completed", "plan_file": "v2/04-build-plan/phases/phase-02/PLAN.md", "summary_file": "v2/04-build-plan/phases/phase-02/SUMMARY.md" },
      { "name": "TX Safety — Core", "status": "completed", "plan_file": "v2/04-build-plan/phases/phase-03/PLAN.md", "summary_file": "v2/04-build-plan/phases/phase-03/SUMMARY.md" },
      { "name": "TX Safety — Advanced", "status": "completed", "plan_file": "v2/04-build-plan/phases/phase-04/PLAN.md", "summary_file": "v2/04-build-plan/phases/phase-04/SUMMARY.md" },
      { "name": "Provider Health & Broadcast Fallback", "status": "completed", "plan_file": "v2/04-build-plan/phases/phase-05/PLAN.md", "summary_file": "v2/04-build-plan/phases/phase-05/SUMMARY.md" },
      { "name": "Security Tests & Infrastructure", "status": "completed", "plan_file": "v2/04-build-plan/phases/phase-06/PLAN.md", "summary_file": "v2/04-build-plan/phases/phase-06/SUMMARY.md" }
    ]
  },
  "tech_stack": {
    "backend_language": "Go 1.22+",
    "router": "Chi v5",
    "database": "SQLite (modernc.org/sqlite)",
    "logging": "slog",
    "config": "envconfig",
    "rate_limiting": "golang.org/x/time/rate",
    "btc_crypto": "btcsuite/btcd, go-bip39",
    "evm_crypto": "go-ethereum v1.17.0",
    "sol_crypto": "SLIP-10 manual (crypto/ed25519, mr-tron/base58)",
    "frontend_framework": "SvelteKit (adapter-static)",
    "frontend_language": "TypeScript (strict)",
    "css": "Tailwind + shadcn-svelte",
    "charts": "Apache ECharts + svelte-echarts",
    "table_virtualization": "@tanstack/svelte-virtual",
    "testing_backend": "Go stdlib testing",
    "testing_frontend": "Vitest + Testing Library",
    "deployment": "Single Go binary with embedded SPA (go:embed)"
  },
  "decisions": {
    "initial_constraints": "Go 1.22+ backend (Chi, SQLite/modernc, slog), SvelteKit frontend (adapter-static, TS strict, Tailwind+shadcn-svelte, ECharts, tanstack-virtual), single binary deployment, localhost-only, free-tier blockchain APIs only, no CGO, CSRF protection, no stored private keys.",
    "feature_tiers": "13 must-have, 6 should-have, 5 nice-to-have, 10 explicitly deferred",
    "auth": "None — localhost-only with CSRF/CORS/host validation",
    "no_responsive": "Desktop-only localhost tool",
    "build_phases": "11 phases: Foundation → Wallet → Explorer → Scanner → Scan UI → Dashboard → BTC TX → BSC TX → SOL TX → Send UI → History/Settings/Deploy",
    "setup_skipped": "CLAUDE.md already fully specified in prework; no additional setup phase needed",
    "btc_bip84": "BTC uses BIP-84 (purpose=84) for Native SegWit bech32, not BIP-44",
    "sol_manual_slip10": "SOL uses manual SLIP-10 ed25519 implementation (~120 lines) instead of external library",
    "echarts_integration": "svelte-echarts v1.0.0 wrapper with tree-shaking, $derived() rune for reactive options",
    "coingecko_public": "CoinGecko public API (no key), 5-min server-side cache, ~5-15 req/min is safe",
    "bsc_eip155": "BSC uses EIP-155 signing with chain ID 56 (mainnet) / 97 (testnet), LegacyTx via go-ethereum",
    "bsc_manual_abi": "BEP-20 transfer uses manual ABI encoding (0xa9059cbb + LeftPadBytes) — simpler than abi.Pack",
    "bsc_gas_buffer": "20% gas price buffer on SuggestGasPrice for BSC reliability",
    "bsc_sequential_nonce": "Gas pre-seed uses PendingNonceAt once + local increment per TX",
    "sol_sequential_sends": "SOL uses sequential per-address sends (not multi-signer batch) due to 1232-byte TX limit",
    "sol_zero_sdk": "SOL TX serialization built from scratch — no external Solana SDK, only crypto/ed25519 + base58",
    "sol_legacy_tx": "SOL uses legacy (non-versioned) transaction format for max validator compatibility",
    "spa_embed": "SPA served via go:embed all:build with SPA fallback in NotFound handler, immutable cache for _app/",
    "v2_scope": "Robustness & hardening: TX safety, scanner resilience, provider health, security tests, infrastructure hardening. No new features, no tech stack changes.",
    "v2_planning_phases": "Plan + Build Plan only (brainstorm, market, mockup skipped — scope defined by robustness audit)",
    "v2_build_phases": "6 phases: Foundation (schema+types+circuit breaker) → Scanner Resilience → TX Safety Core → TX Safety Advanced → Provider Health + Fallback → Security Tests + Infrastructure",
    "v2_circuit_breaker": "Circuit breaker pattern: threshold=3 consecutive fails, 30s cooldown, 1 half-open request. Applied per-provider.",
    "v2_transient_errors": "TransientError wrapper with optional RetryAfter duration. IsTransient() for retry decisions.",
    "v2_tx_state_tracking": "tx_state table tracks individual TX lifecycle: pending→broadcasting→confirming→confirmed|failed|uncertain"
  },
  "session_count": 18,
  "last_session": {
    "id": 18,
    "date": "2026-02-19",
    "summary": "V2 Build Phase 6 complete (final): Security Tests & Infrastructure — 55 new tests (security middleware, scanner providers, TX SSE hub), server hardening (IdleTimeout, MaxHeaderBytes), DB connection pool, price stale-but-serve, graceful shutdown. ALL V2 PHASES COMPLETE.",
    "phase": "building"
  },
  "pending_questions": false,
  "responsive": false
}
